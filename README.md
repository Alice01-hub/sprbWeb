# Summer Pockets 圣地巡礼网站

> 重回那个夏天，探索三岛的美好时光

<div align="center">
  <img src="frontend/public/images/sprb封面图.png" alt="Summer Pockets" width="400">
</div>

## 🌅 项目介绍

这是一个基于 **Summer Pockets** 游戏的圣地巡礼网站，旨在帮助玩家重现游戏中那个难忘的夏天，提供详细的巡礼指南和打卡信息。

### ✨ 主要功能

- 🏠 **首页日记本** - 精美的日记本界面设计，配合BGM营造夏日氛围
- 📖 **目录页面** - 书本样式的导航界面，悬停查看各篇章摘要
- 🚌 **交通篇** - 完整的交通攻略系统，支持PDF下载和富文本编辑
- 📍 **打卡篇** - 三岛地图和打卡点详情（开发中）
- 🦋 **神域** - 七影碟寄存空间，展示未来功能规划
- 🎵 **多BGM播放器** - 支持播放列表、随机播放、单曲循环
- 🎨 **3D动画** - 流畅的页面过渡和交互效果
- 🔧 **Python后端** - Flask API支持PDF生成和数据管理
- ✏️ **内容编辑功能** - 支持实时编辑交通攻略卡片

### 🎨 视觉设计特色 (v5.0 - 完整编辑主题)

- **统一夏日背景** - 首页和目录页采用一致的温暖渐变背景
- **优化色彩过渡** - 从天蓝色到薄荷绿、浅黄色、金橙色、珊瑚色的自然过渡
- **手写体美学** - 首页标题采用手写体风格，配合emoji装饰
- **夏日元素动画** - 太阳、海浪、棕榈树、火烈鸟等emoji在背景浮动
- **夏日日记本设计** - 米色纸张质感，橙色装订线设计  
- **无缝音频体验** - 全局BGM管理，页面切换时音频保持连续
- **统一播放控制** - 全站共享音频播放器，一致的用户操作体验
- **3D立体感** - 丰富的3D旋转和缩放动画效果
- **神域蝴蝶主题** - 白色透明蝴蝶图标，营造神秘感

### 🏝️ 涵盖岛屿

- **女木岛** - 以鬼岛传说而闻名
- **男木岛** - 宁静的渔村小岛  
- **直岛** - 现代艺术的圣地

## 🚀 快速开始

### 📋 系统要求

- Node.js 16+ 
- npm 或 yarn
- Python 3.9+
- conda (推荐)
- 现代浏览器（Chrome 80+, Firefox 75+, Safari 13+）

### 🔧 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd sprb-web
   ```

2. **一键启动** ⭐
   ```bash
   # 在sprb-web目录下运行启动脚本
   ./start.sh
   
   # 或者从项目根目录运行
   bash sprb-web/start.sh
   ```
   
   启动脚本会自动：
   - 切换到正确的项目目录
   - 强制清理端口占用
   - 创建conda虚拟环境
   - 安装前后端依赖
   - 检查素材文件
   - 启动前后端服务器（后台运行）

3. **服务器管理**
   ```bash
   # 启动服务器（后台运行）
   ./start.sh
   
   # 停止服务器
   ./start.sh stop
   
   # 重启服务器
   ./start.sh stop && ./start.sh
   
   # 查看运行日志
   tail -f logs/frontend.log
   tail -f logs/backend.log
   ```

4. **手动启动**
   ```bash
   # 进入项目目录
   cd sprb-web
   
   # 安装前端依赖
   cd frontend
   npm install
   npm run dev
   
   # 启动后端服务器（新终端）
   cd ../backend
   conda activate sprb-web
   python app.py
   ```

5. **访问网站**
   - 前端访问: http://localhost:3000
   - 后端API: http://localhost:5000

## 🛠️ 技术栈

### 前端框架
- ⚛️ **React 18** - 现代化用户界面
- 🔷 **TypeScript** - 类型安全开发
- ⚡ **Vite** - 快速构建工具

### 后端服务
- 🐍 **Python 3.9** - 后端开发语言
- 🌶️ **Flask** - 轻量级Web框架
- 📄 **ReportLab** - PDF生成库
- 🔗 **Flask-CORS** - 跨域资源共享

### 样式方案
- 💅 **Styled Components** - CSS-in-JS 样式管理
- 🎬 **Framer Motion** - 流畅动画效果
- 🌞 **夏日主题配色** - 温暖明亮的天空渐变配色

### 开发工具
- 🔀 **React Router** - 路由管理
- 🎵 **多BGM播放系统** - 支持顺序/随机/循环播放
- 🌐 **React Context** - 全局状态管理
- 📝 **富文本编辑器** - 支持Markdown语法
- 📱 **响应式设计** - 移动端适配
- ✏️ **实时编辑功能** - 支持内容管理

## 📁 项目结构

```
sprb-web/
├── frontend/              # 前端项目
│   ├── public/           # 静态资源
│   │   ├── images/       # 图片素材
│   │   └── audio/        # BGM音频文件
│   ├── src/
│   │   ├── components/   # 可复用组件
│   │   │   ├── AudioPlayer.tsx      # 多BGM播放器
│   │   │   └── RichTextEditor.tsx   # 富文本编辑器
│   │   ├── pages/        # 页面组件
│   │   │   ├── HomePage.tsx         # 首页日记本
│   │   │   ├── ContentsPage.tsx     # 目录页
│   │   │   ├── TrafficPage.tsx      # 交通篇（带编辑功能）
│   │   │   ├── CheckinPage.tsx      # 打卡篇
│   │   │   └── OtherPilgrimagePage.tsx # 神域
│   │   ├── contexts/     # React上下文
│   │   │   └── AudioContext.tsx     # 音频状态管理
│   │   ├── styles/       # 样式文件
│   │   └── types/        # 类型定义
│   ├── package.json     # 前端依赖
│   └── vite.config.ts   # Vite配置
├── backend/              # Python后端
│   ├── app.py           # Flask应用入口
│   ├── requirements.txt # Python依赖
│   ├── data/            # 数据存储目录
│   └── uploads/         # 文件上传目录
├── logs/                # 日志文件
├── start.sh             # 一键启动脚本（前后端）
└── README.md           # 项目说明
```

## 🎮 使用说明

### 导航方式
1. **首页**: 欣赏夜空星辰，点击日记本右侧的金属锁扣观看翻页动画
2. **目录页**: 悬停篇章标题查看摘要，点击进入对应页面
3. **返回**: 各页面左上角返回按钮

### 音频控制
- 🎵 BGM会在首页自动播放，支持顺序播放、随机播放、单曲循环
- 🎛️ 右下角音频控制器可调节播放/暂停和音量
- 🔄 **无缝切换** - 首页和目录页共享同一BGM，切换时音频保持连续
- 🌐 全局音频管理，两个页面的播放控制器完全同步
- 📁 **动态播放列表** - 自动扫描音频目录，支持添加或删除BGM文件
- 🔄 **刷新功能** - 点击播放器中的刷新按钮即可重新加载播放列表
- 🎯 **智能播放** - 播放完毕后自动播放下一首（顺序播放和随机播放模式）

### 编辑功能
- ✏️ **编辑模式** - 点击右上角"编辑模式"按钮进入编辑状态
- ➕ **添加卡片** - 在编辑模式下可以添加新的交通攻略卡片
- 🔧 **编辑卡片** - 点击卡片上的"编辑"按钮修改内容
- 🗑️ **删除卡片** - 点击卡片上的"删除"按钮移除卡片
- 💾 **自动保存** - 编辑内容会自动保存到后端数据库

### 交互特色
- ⭐ **星空动画** - 100颗星星随机闪烁，营造夜空氛围
- 📖 **3D翻页效果** - 180度旋转翻页，配合淡入淡出过渡
- 🔒 **金属锁扣** - 立体银色锁扣，悬停发光效果
- 📚 **书本目录** - 左右分栏设计，红色装订线细节
- ✨ **流畅过渡** - 页面间的平滑动画切换

### 浏览器兼容性
现代浏览器自动播放政策可能会阻止BGM自动播放，手动点击播放按钮即可。

## 🎨 设计特色

### 视觉设计 v5.0 (最新)
- 🌃 **夜空主题** - 深蓝渐变背景，营造神秘夜空氛围
- ⭐ **星辰闪烁** - 动态星星动画，增强沉浸感
- 📔 **经典日记本** - 棕色皮质封面，金色装饰边框
- 🔐 **立体锁扣** - 银色金属质感，真实的3D设计
- 📖 **书本目录** - 深色背景配合白色纸张，专业装订效果
- 🦋 **神域主题** - 白色透明蝴蝶图标，神秘感十足

### 交互体验  
- 🖱️ **悬停反馈** - 丰富的鼠标交互效果
- 📱 **响应式** - 完美适配各种设备
- 🎵 **沉浸感** - BGM配合视觉营造完整氛围
- 💭 **智能提示** - 不悬停时显示操作指引
- ✨ **流畅动画** - 所有交互都配有平滑过渡
- ✏️ **实时编辑** - 支持内容的实时编辑和保存

## 📈 更新日志

### v5.1 (2024-07-12) - 稳定性和功能优化
- 🎵 修复BGM自动播放下一首功能，支持顺序播放、随机播放、单曲循环
- 🔄 添加动态音频文件扫描，支持从目录自动加载BGM列表
- 🔧 优化端口管理，只保留前端3000和后端5000两个端口
- 📄 修复PDF下载中文乱码问题，智能适配中文字体
- 🚀 增强一键启动脚本，强化端口清理和健康检查
- 🔄 添加播放列表刷新功能，支持动态添加或删除BGM
- 📦 移除交通篇编辑功能，恢复为原来的静态展示形式
- 🌟 提升整体稳定性和用户体验

### v5.0 (2024-07-12) - 完整编辑功能
- ✏️ 新增交通篇实时编辑功能
- ➕ 支持添加新的交通攻略卡片
- 🔧 完善编辑界面和表单验证
- 🦋 更新"其他巡礼"为"神域"主题
- 📦 重构前端目录结构，统一放置在frontend目录
- 🔄 优化一键启动脚本，强化端口清理功能
- 📄 修复PDF下载功能，支持英文版本避免乱码
- 💾 完善数据持久化和API接口
- 🚀 全面优化开发体验和部署流程

### v4.2 (2024-06) - 无缝音频主题
- 🎵 实现全局BGM管理系统
- 🔄 添加无缝音频切换功能
- 🎛️ 优化音频控制器界面
- 📱 完善移动端适配
- 🎨 统一夏日主题色彩方案

### v4.1 (2024-05) - 交通篇完善
- 🚌 完成交通篇完整内容
- 📄 增加PDF下载功能
- 🔧 优化后端API性能
- 💅 完善样式细节

### v4.0 (2024-04) - 后端集成
- 🐍 集成Python Flask后端
- 📊 添加数据管理功能
- 🔗 完善前后端API交互
- 🛠️ 优化构建和部署流程

### v3.0 (2024-03) - 夜空主题
- 🌃 设计夜空主题首页
- ⭐ 添加星空动画效果
- 📖 完善目录页设计
- 🎨 优化视觉效果

### v2.0 (2024-02) - 3D动画
- 🎬 添加Framer Motion动画
- 📖 实现3D翻页效果
- 🔒 设计立体锁扣组件
- ✨ 完善交互体验

### v1.0 (2024-01) - 基础版本
- 🏠 完成首页基础布局
- 📱 实现响应式设计
- 🎵 添加BGM播放功能
- 🎨 确定视觉设计风格

## 🔧 开发说明

### 开发环境配置
```bash
# 1. 克隆项目
git clone <repository-url>
cd sprb-web

# 2. 创建conda环境
conda create -n sprb-web python=3.9
conda activate sprb-web

# 3. 安装后端依赖
pip install -r backend/requirements.txt

# 4. 安装前端依赖
cd frontend
npm install

# 5. 启动开发服务器
npm run dev
```

### 素材文件要求
```
frontend/public/
├── images/
│   ├── sprb封面图.png
│   ├── 交通篇摘要图.png
│   ├── 打卡篇摘要图.png
│   └── 其他巡礼摘要图.jpg
└── audio/
    └── 水月陵 - Summer Pockets.mp3
```

### API 接口文档
```
GET  /api/health              # 健康检查
GET  /api/download-checklist  # 下载PDF清单（支持中文）
GET  /api/audio-files         # 获取可用音频文件列表
GET  /api/traffic-guides      # 获取交通攻略
POST /api/traffic-guides      # 保存交通攻略
```

### 部署说明
1. 确保服务器安装了Node.js和Python
2. 使用一键启动脚本进行部署
3. 配置反向代理指向3000端口
4. 确保素材文件正确放置

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

### 贡献类型
- 🐛 Bug修复
- ✨ 新功能开发
- 📚 文档改进
- 🎨 UI/UX优化
- 🔧 性能优化

### 开发流程
1. Fork项目
2. 创建功能分支
3. 提交代码
4. 发起Pull Request

## 📄 许可证

本项目仅供学习交流使用，请勿用于商业用途。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和设计师！

---

<div align="center">
  <p>🌟 如果这个项目对你有帮助，请给个Star支持一下！</p>
  <p>💫 让我们一起重回那个美好的夏天！</p>
</div> 