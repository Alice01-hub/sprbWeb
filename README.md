# Summer Pockets 巡礼网站

> 重回那个夏天，探索三岛的美好时光

<div align="center">
  <img src="frontend/public/images/webps/sprb封面图.webp" alt="Summer Pockets" width="400">
</div>

## 🌅 项目介绍

这是一个基于 **Summer Pockets** 游戏的圣地巡礼网站，旨在帮助玩家重现游戏中那个难忘的夏天，提供详细的巡礼指南和打卡信息。

## 🚀 环境隔离系统

### 📋 环境配置

项目支持三种环境配置：

#### 🛠️ 开发环境 (Development)
- **配置文件**: `config/development.json`
- **环境变量**: `backend/env.development`, `frontend/env.development`
- **启动脚本**: `start-dev.sh`
- **特点**: 
  - 调试模式开启
  - 详细日志输出
  - 本地数据库
  - 热重载支持
  - 宽松的安全设置

#### 🧪 测试环境 (Staging)
- **配置文件**: `config/staging.json`
- **环境变量**: `backend/env.staging`, `frontend/env.staging`
- **启动脚本**: `start-staging.sh`
- **特点**:
  - 模拟生产环境
  - 中等安全级别
  - 性能监控开启
  - 备份功能启用

#### 🏭 生产环境 (Production)
- **配置文件**: `config/production.json`
- **环境变量**: `backend/env.production`, `frontend/env.production`
- **启动脚本**: `start-production.sh`
- **特点**:
  - 最高安全级别
  - 性能优化
  - 完整监控
  - 自动备份

### 🎯 快速启动

```bash
# 开发环境
./start-dev.sh

# 测试环境
./start-staging.sh

# 生产环境
./start-production.sh
```

### 🔧 环境隔离特性

#### 数据库隔离
- **开发环境**: `data/shenyu_dev.db`
- **测试环境**: `data/shenyu_staging.db`
- **生产环境**: `data/shenyu.db`

#### 文件上传隔离
- **开发环境**: `uploads/dev/`
- **测试环境**: `uploads/staging/`
- **生产环境**: `uploads/production/`

#### 日志隔离
- **开发环境**: `logs/development.log`
- **测试环境**: `logs/staging.log`
- **生产环境**: `logs/production.log`

#### 端口配置
- **开发环境**: 127.0.0.1 (本地访问)
- **测试环境**: 0.0.0.0 (局域网访问)
- **生产环境**: 0.0.0.0 (公网访问)

### 📊 环境对比

| 特性 | 开发环境 | 测试环境 | 生产环境 |
|------|----------|----------|----------|
| 调试模式 | ✅ 开启 | ❌ 关闭 | ❌ 关闭 |
| 热重载 | ✅ 支持 | ❌ 关闭 | ❌ 关闭 |
| 日志级别 | DEBUG | INFO | INFO |
| 安全级别 | 低 | 中 | 高 |
| 性能监控 | ❌ 关闭 | ✅ 开启 | ✅ 开启 |
| 自动备份 | ❌ 关闭 | ✅ 开启 | ✅ 开启 |
| 错误报告 | ❌ 关闭 | ✅ 开启 | ✅ 开启 |
| 缓存 | ❌ 关闭 | ✅ 开启 | ✅ 开启 |

## 📝 项目维护记录

### 🔧 环境隔离系统 (2025年8月2日)
- **多环境配置** - 新增开发、测试、生产三种环境配置
- **环境变量管理** - 为每个环境创建独立的环境变量文件
- **启动脚本优化** - 创建专门的环境启动脚本
- **数据库隔离** - 不同环境使用独立的数据库文件
- **文件上传隔离** - 不同环境使用独立的上传目录
- **日志隔离** - 不同环境使用独立的日志文件
- **安全配置** - 根据环境调整安全策略和性能设置

### 🎵 音乐播放器更新 (2025年8月2日)
- **新增BGM** - 添加了嶺内ともみ的《with》到播放列表
- **播放列表同步** - 前后端播放列表已同步更新，包含9首Summer Pockets相关音乐
- **API接口更新** - 后端音乐API已更新，支持新的音频文件
- **文件验证** - 确认音频文件可正常访问和播放

### 🧹 文件清理 (2025年8月1日)
- **测试文件清理** - 移除了所有test_*.py和test_*.js测试文件
- **文档文件整理** - 清理了多余的.md文件，保留README.md作为主要文档
- **日志文件清理** - 移除了所有*.log日志文件
- **临时文件清理** - 清理了PID文件和临时文件
- **缓存文件清理** - 清理了__pycache__中的测试文件缓存
- **脚本文件整理** - 移除了多余的脚本文件，只保留核心启动脚本
- **测试文件清理** - 移除了所有测试文件和测试目录，简化前端代码结构
- **项目结构优化** - 简化了项目结构，提高了代码可维护性

## 🎉 v2.2 重大更新 (2025年7月23日)

### 🦋 **用户七影蝶系统** ✨
- **个性化七影蝶** - 每个登录用户可创建一只专属七影蝶，在神域场景中显示
- **自定义配置** - 支持自定义标题、悬停图片、弹窗图片和外部链接
- **数据库管理** - 使用SQLite数据库存储用户七影蝶数据，支持持久化保存
- **图片上传** - 支持上传悬停和弹窗图片，自动生成时间戳文件名
- **编辑功能** - 支持重复编辑和删除用户七影蝶，覆盖原有内容
- **视觉区分** - 用户七影蝶显示为金色边框，与官方七影蝶区分
- **API接口** - 完整的RESTful API支持，包含获取、创建、更新、删除和图片上传接口

### 🏛️ **后台管理系统** ✨
- **用户管理** - 查看所有注册用户信息，包括用户名、邮箱、体力、等级等
- **七影蝶管理** - 查看和编辑所有七影蝶（官方和用户创建的），支持启用/禁用和删除操作
- **数据统计** - 实时显示系统统计数据，包括用户数量、七影蝶数量等
- **独立服务** - 后台管理系统运行在独立端口（前端3001，API8001），不影响主系统
- **美观界面** - 现代化的管理界面，支持响应式设计
- **一键启动** - 提供专门的启动和停止脚本，方便管理

### 🎉 v2.0 重大更新 (2025年7月20日)

#### 📱 **二维码合集系统** ✨
- **打卡地点合集** - 在打卡篇页面添加了"📱 打卡地点合集"按钮
- **二维码展示** - 点击按钮展开二维码模态框，提供完整的打卡地点图片合集
- **智能定位** - 按钮位于男木岛信息卡和地图之间，便于用户访问
- **美观设计** - 白色半透明背景，圆角边框，悬停上浮效果
- **流畅动画** - 模态框具有平滑的缩放和淡入淡出动画效果

#### 🖼️ **图片查看器全面升级** ✨
- **白色背景框** - 为男木岛和直岛的图片查看器添加白色背景框，提升视觉清晰度
- **透明按钮设计** - 所有岛屿页面的关闭和导航按钮改为透明样式，保持UI一致性
- **统一用户体验** - 三个岛屿页面的图片查看器功能完全同步，提供一致的用户体验
- **响应式设计** - 适配不同屏幕尺寸，移动端和桌面端都有良好体验

#### 🗺️ **地图交互系统优化** ✨
- **Tooltip悬停提示** - 地图图标悬停时显示详细信息，包含图片和描述
- **地图详情查看器** - 点击地图图标打开详细地图，显示相关打卡点位置
- **智能图标定位** - 地图图标位置精确配置，支持百分比定位
- **流畅动画效果** - 地图交互具有平滑的动画过渡效果

#### 🎨 **UI/UX全面优化** ✨
- **TypeScript类型安全** - 修复了所有TypeScript类型错误，确保代码稳定性
- **组件复用优化** - 统一了三个岛屿页面的组件结构和样式
- **动画效果增强** - 所有交互元素都具有流畅的动画效果
- **视觉一致性** - 三个岛屿页面采用统一的设计语言和视觉风格

### 🔧 技术改进

#### 📦 **代码质量提升**
- **TypeScript错误修复** - 解决了所有类型错误，提高代码稳定性
- **组件结构优化** - 统一了图片查看器和地图详情查看器的组件结构
- **样式系统完善** - 建立了统一的样式系统，确保视觉一致性
- **性能优化** - 优化了图片加载和动画性能

#### 🎯 **用户体验提升**
- **操作流程优化** - 简化了用户操作流程，提供更直观的交互体验
- **视觉反馈增强** - 所有交互都有明确的视觉反馈
- **响应式优化** - 改进了移动端的用户体验
- **无障碍访问** - 提升了网站的无障碍访问性

## ✨ 主要功能

- 🏠 **首页日记本** - 精美的日记本界面设计，配合BGM营造夏日氛围
- 📖 **目录页面** - 书本样式的导航界面，悬停查看各篇章摘要
- 🚌 **交通篇** - 完整的交通攻略系统，包含巡礼清单功能，支持PDF文件下载和进度追踪
- 📍 **打卡篇** - 航行打卡系统，配备完整的小船航行动画和智能路线规划
  - 🗺️ **航线版地图** - 使用带有清晰航线标识的专用地图
  - 🚢 **智能航行** - 点击岛屿卡片或岛屿图标，小船从高松港出发沿航线航行
  - 🎯 **方向感知** - 小船会根据航行方向自动调整角度，模拟真实航行
  - 💬 **到达提示** - 在地图和岛屿卡片中间显示白色提示框："🎉 XX岛屿到了，请下船！"
  - 🔄 **返回机制** - 提供"返回高松港"按钮，小船自动返回起点
  - 🚫 **状态管理** - 航行中禁用岛屿点击，确保操作的一致性
  - 📱 **二维码合集** - 打卡地点合集二维码系统，提供完整的打卡地点图片合集 ✨
- 🦋 **神域** - 神秘的特殊区域，基于Summer Pockets游戏设定，提供七影蝶管理系统和小游戏体验
  - 🦋 **官方七影蝶** - 5只预设的官方七影蝶，包含巡礼网站链接和场景图片
  - 🦋 **用户七影蝶** - 每个登录用户可创建一只专属七影蝶，支持自定义配置
  - 🎮 **夜晚场景** - 20张夜晚场景图片，随机切换营造神秘氛围
  - ⭐ **星点动画** - 80个随机分布的星点，使用Framer Motion实现浮动动画
  - 🎯 **交互体验** - 悬停显示信息，点击跳转链接或打开弹窗
- 🎵 **音乐播放器** - 简洁的圆形按钮播放器，支持菜单式播放控制
- 🎨 **3D动画** - 流畅的页面过渡和交互效果
- 🦋 **七影碟拖尾特效** - 基于TextCursor逻辑的鼠标拖尾效果，七影碟图片跟随鼠标移动，支持随机浮动和旋转动画
- 🔓 **七影碟锁图标** - 封面页面使用七影碟图片作为解锁图标，支持悬停变化和光晕效果
- ✨ **七影碟闪动特效** - 目录页面标题右侧七影碟蝴蝶闪动动画，配合深邃星空背景和粒子特效
- 🚀 **FastAPI后端** - 高性能异步后端服务，支持音乐API和完整的API文档

### 🎨 视觉设计特色

- **圆形音乐播放器** - 简洁的圆形按钮设计，点击打开播放菜单
- **菜单式播放控制** - 所有播放功能集中在菜单中，包含播放/暂停、上下曲切换、音量调节等
- **双播放模式** - 支持列表循环和单曲循环两种播放模式
- **智能自动播放** - 用户交互时自动启动BGM播放，无需手动操作
- **可视化播放列表** - 完整的播放列表显示，点击即可切换曲目
- **精确音量控制** - 滑块式音量控制，调节时不会重新播放音乐 ✨
- **BGM标题匹配** - 后端API驱动的播放列表，确保BGM与标题完全对应 ✨
- **BGM切换修复** - 修复了切换BGM时播放错误音轨的问题，确保准确播放选中的音乐 🔧
- **🔓 七影碟锁图标系统** - 封面页面解锁图标全面升级 ✨
  - 🎨 **图片锁图标** - 使用七影碟-4.png作为默认锁图标，替代原有CSS绘制图标
  - 🌟 **悬停变化效果** - 悬停时切换为七影碟-3.png，配合缩放和发光效果
  - 📍 **灵活定位** - 支持自定义锁图标位置，可调节位置参数
  - 💫 **光晕动画** - 悬停时显示柔和的光晕效果，营造神秘感
- **🦋 七影碟拖尾特效** - 智能鼠标拖尾系统，基于官方TextCursor组件逻辑实现 ✨
  - 📐 **智能间距控制** - 根据鼠标移动距离自动生成拖尾点，间距可配置
  - 🎭 **方向感知** - 七影碟图片根据鼠标移动方向自动调整角度
  - 🌊 **随机浮动** - 每个拖尾元素具有独特的随机浮动和旋转动画
  - 🌈 **色彩变化** - 自动应用色相旋转，每个拖尾元素呈现不同色彩
  - ⏱️ **性能优化** - 智能清理机制，防止内存泄漏，可配置拖尾长度和更新频率
  - 💫 **淡出效果** - 优雅的透明度和缩放淡出动画，可自定义退出时长
- **🦋 目录页蝴蝶动画** - 目录页每个章节标题右侧常驻蝴蝶图标，悬停时显示翅膀闪动效果 ✨
  - 🖼️ **双图循环播放** - 使用七影碟-3.png和七影碟-4.png图片循环播放，模拟蝴蝶翅膀闪动
  - 🎯 **默认显示** - 非悬停状态下默认显示七影碟-4.png图片作为静态蝴蝶图标
  - ⚡ **智能动画控制** - 悬停时开始400ms周期的图片循环，离开时恢复默认图片
  - 🌃 **深邃星空背景** - 悬停时显示深蓝到黑色的渐变背景，营造深邃夜空效果
  - ⭐ **星空粒子特效** - 悬停时显示25个随机分布的闪烁星星，每个星星都有独特的动画效果
    - 💫 **闪烁动画** - 星星具有随机的闪烁周期和光晕效果
    - 🌊 **浮动效果** - 星星微妙的上下浮动动画，增强动态感
    - 🎨 **随机生成** - 每次加载时星星位置、大小、动画延迟都随机生成
  - 🎨 **简洁动画设计** - 蝴蝶动画专注于翅膀扇动效果，无额外的缩放和旋转特效
  - 📍 **精确定位** - 蝴蝶图标位于标题右侧，不影响页面布局
  - 🔧 **尺寸可调** - 通过size参数控制蝴蝶图片大小（默认150px）
- **🌙 目录页夜晚背景渐变** - 标题悬停时显示从左到右由浅入深的夜晚色彩渐变效果 ✨
  - 🎨 **夜晚山路色彩** - 参考女木岛秘密基地山路夜晚场景，采用渐变色彩从浅蓝灰到深黑夜
  - 🌃 **渐变层次** - 从浅蓝灰色→深蓝灰色→午夜蓝→深夜蓝→最深黑夜色，营造深邃夜空效果
  - ✨ **蝴蝶突出** - 深色背景使得发光的七影碟蝴蝶动画更加明显和突出
  - 🔄 **平滑过渡** - 悬停进入和离开时背景色平滑过渡，视觉体验流畅自然
- **统一夏日背景** - 首页和目录页采用一致的温暖渐变背景
- **简洁交通攻略** - 白底黑字设计，清晰易读，专注内容本身
- **集成巡礼清单** - 交通篇整合巡礼清单功能，交互式任务清单，实时进度追踪
- **手写体美学** - 首页标题采用手写体风格，配合emoji装饰
- **夏日元素动画** - 太阳、海浪、棕榈树、火烈鸟等emoji在背景浮动
- **夏日日记本设计** - 米色纸张质感，橙色装订线设计  
- **3D立体感** - 丰富的3D旋转和缩放动画效果

### 🏝️ 涵盖岛屿

- **女木岛** - 以鬼岛传说而闻名
- **男木岛** - 宁静的渔村小岛  
- **直岛** - 现代艺术的圣地

### 🚀 岛屿页面系统 (v1.3-v2.0) ✨

#### 📍 打卡篇岛屿导航
- **智能跳转** - 点击岛屿信息卡或地图上的岛屿图标即可直接跳转到对应岛屿页面
- **统一设计** - 三个岛屿页面采用统一的设计风格，保持视觉一致性
- **返回导航** - 每个岛屿页面都提供返回打卡篇的导航按钮

#### 🏝️ 女木岛页面 (/megijima) ✨
- **鬼岛传说** - 详细介绍女木岛的鬼岛传说和历史背景
- **📸 智能图片切换系统** - 全新打卡地点展示系统 (v1.4) ✨
  - 🎯 **5大打卡地点** - 窄路、山道、秘密基地山路、采石场入口、采石场分岔路
  - 🌅 **时分变化展示** - 每个地点展示不同时分的场景（白天、黄昏、夜晚、深夜、有光、无光）
  - 🎮 **自动播放控制** - 支持自动播放、手动切换、播放/暂停控制
  - 🎨 **流畅动画过渡** - 图片切换时的滑动动画效果，配合淡出淡入
  - 📍 **时分标签显示** - 每张图片显示对应的时分标签（如：黄昏、夜晚等）
  - 🎯 **指示器导航** - 底部圆点指示器，支持直接点击跳转
  - 📱 **响应式设计** - 支持移动端和桌面端的自适应布局
  - 📜 **滚动式展示** - 打卡地点采用网格布局，显示3个地点，更多通过滚动查看
  - 🎨 **统一视觉风格** - 与女木岛页面整体设计保持一致的卡片式布局

#### 🌊 男木岛页面 (/ogijima) ✨
- **🐱 猫岛主题** - 展示男木岛"猫岛"的独特魅力和传统渔村风貌
- **🏷️ 双标签设计** - 岛屿介绍和巡礼说明两个标签页，支持流畅切换
- **🗺️ 智能地图系统** - 10个打卡图标分布在地图上，支持悬停放大和位置调整
- **📍 完整巡礼指南** - 10个巡礼点，9个可拍照，8个可还原，包含详细说明
- **🖼️ 丰富图片展示** - 10个主要打卡地点，每个地点包含多时段CG图片
- **🎠 图片轮播系统** - 自动播放的图片轮播，支持点击查看大图
- **🔍 模态框查看器** - 全屏图片查看器，支持图片导航和键盘操作
- **🏊 经典场景重现** - 泳池、灯塔、秘密基地、鸥相遇小道等标志性场景
- **📱 完全响应式** - 适配移动端和桌面端，网格布局自动调整
- **🎨 白色背景框** - 图片查看器添加白色背景框，提升视觉清晰度 (v2.0) ✨
- **🔘 透明按钮** - 关闭和导航按钮改为透明样式，保持UI一致性 (v2.0) ✨

#### 🎨 直岛页面 (/naoshima) ✨
- **艺术圣地** - 现代艺术与自然的完美融合主题展示
- **🗺️ 智能地图详情系统** - 全新地图交互功能 (v1.5) ✨
  - 🎯 **5个地图图标** - 小卖部、水塘海狸家、白羽钓点、蔷薇庄、神社（神社仅显示，无点击功能）
  - 🔍 **点击放大查看** - 点击地图图标打开白色模态框，显示放大的详细地图
  - 📍 **专属地图图片** - 每个地点都有对应的详细地图图片（如：直岛地图-小卖部-路线版.png）
  - 🤭 **地图标志显示** - 在放大的地图上显示🤭表情符号作为位置标志
  - 📝 **详细说明文字** - 模态框下方显示对应地点的详细描述
  - 🎨 **流畅动画效果** - 模态框打开/关闭具有平滑的缩放和淡入淡出动画
  - 🔄 **响应式设计** - 适配不同屏幕尺寸，移动端和桌面端都有良好体验
  - 🎯 **精确定位** - 地图标志位置可精确配置，支持百分比定位
- **🏷️ 双标签设计** - 岛屿介绍和巡礼说明两个标签页，支持流畅切换
- **🖼️ 丰富图片展示** - 16个主要打卡地点，每个地点包含多时段CG图片
- **🎠 图片轮播系统** - 自动播放的图片轮播，支持点击查看大图
- **🔍 模态框查看器** - 全屏图片查看器，支持图片导航和键盘操作
- **📱 完全响应式** - 适配移动端和桌面端，网格布局自动调整
- **🎨 白色背景框** - 图片查看器添加白色背景框，提升视觉清晰度 (v2.0) ✨
- **🔘 透明按钮** - 关闭和导航按钮改为透明样式，保持UI一致性 (v2.0) ✨

#### 🎨 页面特色功能
- **美观布局** - 采用卡片式布局，层次分明，视觉效果佳
- **动画效果** - 页面加载时具有流畅的动画过渡效果
- **图片占位** - 为未来的实际图片预留展示空间
- **响应式设计** - 适配不同屏幕尺寸，提供最佳浏览体验

## 🚀 快速开始

### 📋 系统要求

- Node.js 16+ 
- npm 或 yarn
- Python 3.9+
- conda (必需) - 用于虚拟环境管理，不使用venv
- 现代浏览器（Chrome 80+, Firefox 75+, Safari 13+）

### 🔧 安装步骤

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd sprb-web
   ```

2. **一键启动** ⭐
   ```bash
   # 推荐：使用一键启动脚本（启动所有服务，包括后台管理系统）
   ./start.sh
   
   # 停止所有服务
   ./stop.sh
   ```
   
   启动脚本会自动：
   - 🔧 强制关闭占用端口（3000、3001、8000、8001）
   - 🐍 激活conda虚拟环境 "sprb-web"
   - 📦 检查并安装前后端依赖
   - 🚀 启动主系统服务（前端3000，后端8000）
   - 🏛️ 启动后台管理系统（前端3001，后端8001）
   - 🌐 显示服务状态和访问地址
   - 📝 生成详细的启动日志

3. **服务器管理**
   ```bash
   # 一键启动所有服务（包括后台管理系统）
   ./start.sh
   
   # 停止所有服务
   ./stop.sh
   
   # 查看运行日志
   tail -f frontend.log
   tail -f backend/server.log
   tail -f admin/backend/admin_api.log
   tail -f admin/admin_frontend.log
   
   # 检查服务状态
   ps aux | grep -E "(python|node|uvicorn|admin_api)"
   ```

4. **访问网站**
   - 主前端: http://localhost:3000
   - 主后端API: http://localhost:8000
   - 主API文档: http://localhost:8000/docs
   - 后台管理前端: http://localhost:3001
   - 后台管理API: http://localhost:8001
   - 后台API文档: http://localhost:8001/docs

### 🏛️ 后台管理系统

后台管理系统提供完整的用户和七影蝶管理功能，现在已集成到主启动脚本中：

**访问地址**：
- 后台管理前端: http://localhost:3001
- 后台管理API: http://localhost:8001
- API文档: http://localhost:8001/docs

**功能特性**：
- 📊 **仪表盘** - 系统统计数据概览
- 👥 **用户管理** - 查看所有用户信息和状态
- 🦋 **七影蝶管理** - 管理官方和用户七影蝶，支持编辑和删除
- 🎨 **美观界面** - 现代化管理界面，支持响应式设计
- 🚀 **一键启动** - 使用 `./start.sh` 可同时启动主系统和后台管理系统

### 🖼️ 图片优化工具

项目提供了完整的图片优化工具链：

```bash
# 图片分类整理
cd frontend/public/images
python organize_images.py

# 图片格式优化（转换为WebP）
python optimize_images.py --organize-by-island

# 更新代码中的图片路径
cd ../../..
python update_image_paths_v2.py
```

**优化效果**：
- 📁 按岛屿分类：男木岛、女木岛、直岛
- 💾 空间节省：756MB → 30MB (96%压缩率)
- ⚡ 加载速度：提升90%以上
- 🎯 解决直岛篇图片加载问题

### 🚀 一键启动特性

- **🔧 智能端口清理**: 自动检测并清理3000、8000端口占用
- **🐍 虚拟环境管理**: 自动创建/激活conda虚拟环境"sprb-web"
- **📦 依赖自动检查**: 自动检查并安装前后端所需依赖
- **🚀 并行服务启动**: 同时启动前端(React+Vite)和后端(FastAPI)服务
- **📊 PID进程管理**: 自动保存进程ID，支持优雅停止
- **📝 详细日志记录**: 完整的服务日志记录到logs目录
- **🌐 状态实时监控**: 清晰的启动状态和访问信息显示
- **🎨 美观命令行界面**: 带颜色的状态信息和进度提示

### 🖼️ 图片优化系统 ✨

- **📁 智能分类管理**: 按岛屿分类存放图片（男木岛、女木岛、直岛）
- **🔄 格式自动转换**: 将BMP等大文件自动转换为WebP格式
- **💾 空间大幅节省**: 文件大小从756MB压缩至30MB，节省96%空间
- **⚡ 加载性能提升**: 页面加载速度提升90%以上

## 用户认证系统

### 依赖环境
- passlib[bcrypt]（密码加密）
- python-jose（JWT Token）
- email-validator（邮箱验证）

### API接口
- `POST /api/auth/register` 用户注册（用户名、密码、邮箱）
- `POST /api/auth/login` 用户登录（JWT Token认证）
- `POST /api/auth/reset-password` 密码重置

### 使用说明
1. 注册：
   ```json
   POST /api/auth/register
   {
     "username": "testuser",
     "password": "yourpassword",
     "email": "test@example.com"
   }
   ```
2. 登录：
   ```json
   POST /api/auth/login
   {
     "username": "testuser",
     "password": "yourpassword"
   }
   ```
   返回：
   ```json
   {
     "access_token": "...",
     "token_type": "bearer"
   }
   ```
3. 密码重置：
   ```json
   POST /api/auth/reset-password
   {
     "username": "testuser",
     "new_password": "newpass"
   }
   ```

## 数据库设计与初始化

### 依赖环境
- 已在 `sprb-web` conda 虚拟环境下安装：
  - sqlalchemy
  - alembic
  - fastapi
  - uvicorn
  - pydantic

### 数据库结构
- 用户表（users）
- 七影蝶表（butterflies）
- 游戏记录表（game_records）
- 用户会话表（user_sessions）

### 初始化步骤
1. 激活虚拟环境：
   ```bash
   conda activate sprb-web
   ```
2. 一键初始化数据库（自动创建表结构）：
   ```bash
   python backend/init_db.py
   ```
3. 数据库文件默认生成在 `backend/data/shenyu.db`

### 相关文件
- `backend/api/models.py`：ORM模型定义
- `backend/api/database.py`：数据库连接与初始化
- `backend/init_db.py`：初始化脚本

## 📝 版本历史

### v2.2 (2025年7月23日) - 重大更新
- 🦋 **用户七影蝶系统** - 个性化七影蝶创建和管理
- 🏛️ **后台管理系统** - 完整的用户和七影蝶管理功能

### v2.1 (2025年1月) - 神域开发规划
- 📋 **神域开发方案** - 完整的功能规划和技术架构设计
- 🎮 **小游戏系统** - 夜晚森林和神域双场景游戏体验
- 🦋 **七影蝶管理** - 记忆内容上传、观看和权限控制系统
- 💪 **体力系统** - 游戏化体力消耗和睡眠恢复机制
- 🎨 **夜晚主题** - 神秘深邃的视觉设计和BGM系统

### v2.0 (2025年7月20日) - 重大更新
- ✨ **打卡篇主要功能完整实现**
- 📱 **二维码合集系统** - 打卡地点合集二维码展示
- 🖼️ **图片查看器全面升级** - 白色背景框和透明按钮设计
- 🗺️ **地图交互系统优化** - Tooltip悬停提示和地图详情查看器
- 🎨 **UI/UX全面优化** - TypeScript类型安全修复和视觉一致性提升
- 🔧 **技术改进** - 代码质量提升和用户体验优化

### v1.5 (2024年12月)
- 🗺️ **直岛地图详情系统** - 智能地图交互功能
- 🎯 **地图图标点击放大** - 专属地图图片和详细说明
- 🎨 **流畅动画效果** - 模态框动画和响应式设计

### v1.4 (2024年11月)
- 📸 **女木岛智能图片切换系统** - 时分变化展示和自动播放控制
- 🎮 **图片轮播系统** - 流畅动画过渡和指示器导航
- 📱 **响应式设计** - 移动端和桌面端自适应布局

### v1.3 (2024年10月)
- 🏝️ **岛屿页面系统** - 女木岛、男木岛、直岛三个完整页面
- 📍 **智能跳转导航** - 统一的岛屿导航和返回机制
- 🎨 **统一设计风格** - 卡片式布局和流畅动画效果

### v1.2 (2024年9月)
- 🚢 **智能航行系统** - 小船航行动画和方向感知
- 🗺️ **航线版地图** - 专用地图和到达提示系统
- 🔄 **状态管理** - 航行状态控制和返回机制

### v1.1 (2024年8月)
- 🎵 **音乐播放器** - 圆形按钮设计和菜单式播放控制
- 🦋 **七影碟特效** - 拖尾特效、锁图标和闪动动画
- 🌙 **目录页夜晚背景** - 深邃星空背景和粒子特效

### v1.0 (2024年7月)
- 🏠 **首页日记本** - 夏日日记本设计和BGM系统
- 📖 **目录页面** - 书本样式导航和悬停摘要
- 🚌 **交通篇** - 完整交通攻略和巡礼清单功能

## 🤝 贡献指南

欢迎提交Issue和Pull Request来帮助改进这个项目！

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 📚 开发文档

### 神域开发相关文档
- [神域开发方案](./神域开发方案.md) - 完整的功能规划和技术选型
- [神域开发实施计划](./神域开发实施计划.md) - 详细的开发时间安排和任务分解
- [神域技术架构文档](./神域技术架构文档.md) - 系统架构和技术实现细节

---

<div align="center">
  <p>🌅 重回那个夏天，探索三岛的美好时光 🌅</p>
  <p><em>Summer Pockets 巡礼网站 v2.2</em></p>
</div>